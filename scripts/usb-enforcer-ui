#!/bin/bash
# USB Enforcer UI wrapper
set -e

LIBDIR="/usr/lib/usb-enforcer"
VENV="${LIBDIR}/.venv"
UI_SCRIPT="${LIBDIR}/usb_enforcer_ui.py"

# Use venv if available, otherwise use system Python with PYTHONPATH
if [ -d "${VENV}" ] && [ -f "${VENV}/bin/python3" ]; then
    export PYTHONPATH="${LIBDIR}"
    exec "${VENV}/bin/python3" "${UI_SCRIPT}" "$@"
else
    export PYTHONPATH="${LIBDIR}"
    exec python3 "${UI_SCRIPT}" "$@"
fi
